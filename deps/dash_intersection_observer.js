!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.dash_intersection_observer=t(require("react")):e.dash_intersection_observer=t(e.React)}(self,(e=>(()=>{"use strict";var t={500:(e,t,r)=>{var i,n=Object.create,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,l=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,u=(e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of a(t))c.call(e,n)||n===r||o(e,n,{get:()=>t[n],enumerable:!(i=s(t,n))||i.enumerable});return e},h=(e,t,r)=>(r=null!=e?n(l(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),d=(e,t,r)=>(((e,t,r)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),p={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(p,{InView:()=>O,defaultFallbackInView:()=>w,observe:()=>V,useInView:()=>_}),e.exports=(i=p,u(o({},"__esModule",{value:!0}),i));var f=h(r(812)),b=new Map,v=new WeakMap,y=0,g=void 0;function w(e){g=e}function V(e,t,r={},i=g){if(void 0===window.IntersectionObserver&&void 0!==i){const n=e.getBoundingClientRect();return t(i,{isIntersecting:i,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:n,intersectionRect:n,rootBounds:n}),()=>{}}const{id:n,observer:o,elements:s}=function(e){let t=function(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(r=e.root,r?(v.has(r)||(y+=1,v.set(r,y.toString())),v.get(r)):"0"):e[t]}`;var r})).toString()}(e),r=b.get(t);if(!r){const i=new Map;let n;const o=new IntersectionObserver((t=>{t.forEach((t=>{var r;const o=t.isIntersecting&&n.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(r=i.get(t.target))||r.forEach((e=>{e(o,t)}))}))}),e);n=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:i},b.set(t,r)}return r}(r);let a=s.get(e)||[];return s.has(e)||s.set(e,a),a.push(t),o.observe(e),function(){a.splice(a.indexOf(t),1),0===a.length&&(s.delete(e),o.unobserve(e)),0===s.size&&(o.disconnect(),b.delete(n))}}var O=class extends f.Component{constructor(e){super(e),d(this,"node",null),d(this,"_unobserveCb",null),d(this,"handleNode",(e=>{this.node&&(this.unobserve(),e||this.props.triggerOnce||this.props.skip||this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=e||null,this.observeNode()})),d(this,"handleChange",((e,t)=>{e&&this.props.triggerOnce&&this.unobserve(),function(e){return"function"!=typeof e.children}(this.props)||this.setState({inView:e,entry:t}),this.props.onChange&&this.props.onChange(e,t)})),this.state={inView:!!e.initialInView,entry:void 0}}componentDidUpdate(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve(),this.node=null}observeNode(){if(!this.node||this.props.skip)return;const{threshold:e,root:t,rootMargin:r,trackVisibility:i,delay:n,fallbackInView:o}=this.props;this._unobserveCb=V(this.node,this.handleChange,{threshold:e,root:t,rootMargin:r,trackVisibility:i,delay:n},o)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){const{children:e}=this.props;if("function"==typeof e){const{inView:t,entry:r}=this.state;return e({inView:t,entry:r,ref:this.handleNode})}const{as:t,triggerOnce:r,threshold:i,root:n,rootMargin:o,onChange:s,skip:a,trackVisibility:l,delay:c,initialInView:u,fallbackInView:h,...d}=this.props;return f.createElement(t||"div",{ref:this.handleNode,...d},e)}},m=h(r(812));function _({threshold:e,delay:t,trackVisibility:r,rootMargin:i,root:n,triggerOnce:o,skip:s,initialInView:a,fallbackInView:l,onChange:c}={}){var u;const[h,d]=m.useState(null),p=m.useRef(),[f,b]=m.useState({inView:!!a,entry:void 0});p.current=c,m.useEffect((()=>{if(s||!h)return;let a;return a=V(h,((e,t)=>{b({inView:e,entry:t}),p.current&&p.current(e,t),t.isIntersecting&&o&&a&&(a(),a=void 0)}),{root:n,rootMargin:i,threshold:e,trackVisibility:r,delay:t},l),()=>{a&&a()}}),[Array.isArray(e)?e.toString():e,h,n,i,o,s,r,l,t]);const v=null==(u=f.entry)?void 0:u.target,y=m.useRef();h||!v||o||s||y.current===v||(y.current=v,b({inView:!!a,entry:void 0}));const g=[d,f.inView,f.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}},702:function(e,t,r){var i=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var o=n(r(812)),s=r(500),a=function(e){var t=e.children,r=e.style,n=e.className,a=e.id,l=e.setProps,c=e.triggerOnce,u=e.inViewCount,h=i(e,["children","style","className","id","setProps","triggerOnce","inViewCount"]),d=o.default.useRef(0),p=u||0,f=(0,s.useInView)(h),b=f.ref,v=f.inView;return o.default.useEffect((function(){var e={};c&&p<1&&(v?(e.inViewCount=p+1,d.current===p?e.inView=!0:e.inView=String(Math.random()),d.current=p+1):e.inView=!1),c||(e.inView=v),Object.keys(e).length>0&&l(e)}),[v,u]),o.default.createElement("div",{id:a,ref:b,style:r,className:n},t)};a.defaultProps={},t.default=a},294:function(e,t,r){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.DashIntersectionObserver=void 0;var n=i(r(702));t.DashIntersectionObserver=n.default},812:t=>{t.exports=e}},r={};return function e(i){var n=r[i];if(void 0!==n)return n.exports;var o=r[i]={exports:{}};return t[i].call(o.exports,o,o.exports,e),o.exports}(294)})()));